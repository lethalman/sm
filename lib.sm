map = f s:
	x, ns = s;
	if eos? x
		then eos
		else [f x, map f ns];

print (map (x:x+1) [1,[2,[3]]]) eos
